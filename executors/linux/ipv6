#!/bin/sh
[ -z "$VERBOSE" ] || set -x

yesno() {
        case "$1" in
        yes|1)  echo 1 ;;
        *)      echo 0 ;;
        esac
}

case "$PHASE" in
up)
	if [ -n "$IF_IPV6_AUTOCONF" -a -e "/proc/sys/net/ipv6/conf/${IFACE}/autoconf" ]; then
		${MOCK} echo $(yesno ${IF_IPV6_AUTOCONF}) > "/proc/sys/net/ipv6/conf/${IFACE}/autoconf"
	fi

	if [ -n "$IF_IPV6_ACCEPT_RA" -a -e "/proc/sys/net/ipv6/conf/${IFACE}/accept_ra" ]; then
		${MOCK} echo ${IF_IPV6_ACCEPT_RA} > "/proc/sys/net/ipv6/conf/${IFACE}/accept_ra"
	fi

	if [ -n "$IF_IPV6_DAD_TRANSMITS" -a -e "/proc/sys/net/ipv6/conf/${IFACE}/dad_transmits" ]; then
		${MOCK} echo ${IF_IPV6_DAD_TRANSMITS} > "/proc/sys/net/ipv6/conf/${IFACE}/dad_transmits"
	fi

	if [ -n "$IF_IPV6_OPTIMISTIC_DAD" -a -e "/proc/sys/net/ipv6/conf/${IFACE}/optimistic_dad" ]; then
		${MOCK} echo $(yesno ${IF_IPV6_OPTIMISTIC_DAD}) > "/proc/sys/net/ipv6/conf/${IFACE}/optimistic_dad"
	fi
	;;
esac
